<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Multigraph Canvas Test</title>

<!--
  <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'
            type='text/javascript'></script>
-->
  <script type="text/javascript" src="../../../lib/jquery/jquery.min.js"></script>

  <script type="text/javascript" src="../../../lib/jermaine/build/jermaine.js"></script>
  <script type="text/javascript" src="../../../lib/util/util.js"></script>
  <script type="text/javascript" src="../../../lib/sprintf/sprintf-0.7-beta1.js"></script>
  <script type="text/javascript" src="../../../lib/requestanimationframe/requestanimationframe.js"></script>
<!-- 
  The lines between BEGIN_ANT_LINES and END_ANT_LINES below are inserted/maintained automatically
  by ant.  Do NOT edit them by hand; if you do, your edits will be lost next time ant is run.
  If you need to modify the list of *.js files included here, first try simply running the ant
  task that edits this file (look in build.xml to see which task that is); it constructs the list
  of files below according to patterns, and it will pick up new files that match those patterns
  automatically.  If you add a file that is not matched by one of the existing patterns, change
  or add a pattern in the build.xml file to include your file.
-->
<!--BEGIN_ANT_LINES-->
<script type="text/javascript" src="../../../src/utility_functions/parsing_functions.js"></script>
<script type="text/javascript" src="../../../src/utility_functions/serializing_functions.js"></script>
<script type="text/javascript" src="../../../src/utility_functions/validation_functions.js"></script>
<script type="text/javascript" src="../../../src/core/data_value.js"></script>
<script type="text/javascript" src="../../../src/core/data_measure.js"></script>
<script type="text/javascript" src="../../../src/core/data_formatter.js"></script>
<script type="text/javascript" src="../../../src/math/box.js"></script>
<script type="text/javascript" src="../../../src/math/displacement.js"></script>
<script type="text/javascript" src="../../../src/math/enum.js"></script>
<script type="text/javascript" src="../../../src/math/insets.js"></script>
<script type="text/javascript" src="../../../src/math/point.js"></script>
<script type="text/javascript" src="../../../src/math/rgb_color.js"></script>
<script type="text/javascript" src="../../../src/math/util.js"></script>
<script type="text/javascript" src="../../../src/core/renderer.js"></script>
<script type="text/javascript" src="../../../src/core/data_variable.js"></script>
<script type="text/javascript" src="../../../src/core/data.js"></script>
<script type="text/javascript" src="../../../src/core/plot.js"></script>
<script type="text/javascript" src="../../../src/core/array_data.js"></script>
<script type="text/javascript" src="../../../src/core/axis.js"></script>
<script type="text/javascript" src="../../../src/core/axis_title.js"></script>
<script type="text/javascript" src="../../../src/core/background.js"></script>
<script type="text/javascript" src="../../../src/core/binding.js"></script>
<script type="text/javascript" src="../../../src/core/constant_plot.js"></script>
<script type="text/javascript" src="../../../src/core/csv_data.js"></script>
<script type="text/javascript" src="../../../src/core/data_plot.js"></script>
<script type="text/javascript" src="../../../src/core/datatips.js"></script>
<script type="text/javascript" src="../../../src/core/datatips_variable.js"></script>
<script type="text/javascript" src="../../../src/core/datetime_formatter.js"></script>
<script type="text/javascript" src="../../../src/core/datetime_measure.js"></script>
<script type="text/javascript" src="../../../src/core/datetime_value.js"></script>
<script type="text/javascript" src="../../../src/core/filter.js"></script>
<script type="text/javascript" src="../../../src/core/filter_option.js"></script>
<script type="text/javascript" src="../../../src/core/graph.js"></script>
<script type="text/javascript" src="../../../src/core/graph_title.js"></script>
<script type="text/javascript" src="../../../src/core/grid.js"></script>
<script type="text/javascript" src="../../../src/core/icon.js"></script>
<script type="text/javascript" src="../../../src/core/img.js"></script>
<script type="text/javascript" src="../../../src/core/labeler.js"></script>
<script type="text/javascript" src="../../../src/core/legend.js"></script>
<script type="text/javascript" src="../../../src/core/mixin.js"></script>
<script type="text/javascript" src="../../../src/core/multigraph.js"></script>
<script type="text/javascript" src="../../../src/core/number_formatter.js"></script>
<script type="text/javascript" src="../../../src/core/number_measure.js"></script>
<script type="text/javascript" src="../../../src/core/number_value.js"></script>
<script type="text/javascript" src="../../../src/core/pan.js"></script>
<script type="text/javascript" src="../../../src/core/plot_legend.js"></script>
<script type="text/javascript" src="../../../src/core/plotarea.js"></script>
<script type="text/javascript" src="../../../src/core/renderers/band_renderer.js"></script>
<script type="text/javascript" src="../../../src/core/renderers/bar_renderer.js"></script>
<script type="text/javascript" src="../../../src/core/renderers/fill_renderer.js"></script>
<script type="text/javascript" src="../../../src/core/renderers/pointline_renderer.js"></script>
<script type="text/javascript" src="../../../src/core/renderers/rangebar_renderer.js"></script>
<script type="text/javascript" src="../../../src/core/service.js"></script>
<script type="text/javascript" src="../../../src/core/text.js"></script>
<script type="text/javascript" src="../../../src/core/variables.js"></script>
<script type="text/javascript" src="../../../src/core/web_service_data.js"></script>
<script type="text/javascript" src="../../../src/core/web_service_data_cache_node.js"></script>
<script type="text/javascript" src="../../../src/core/web_service_data_iterator.js"></script>
<script type="text/javascript" src="../../../src/core/window.js"></script>
<script type="text/javascript" src="../../../src/core/zoom.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/jquery_mixin.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/array_data.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/axis.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/axis_title.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/background.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/binding.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/csv_data.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/data.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/data_variable.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/datatips.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/datatips_variable.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/filter.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/filter_option.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/graph.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/graph_title.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/grid.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/icon.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/img.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/labeler.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/legend.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/multigraph.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/pan.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/parse_xml.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/plot.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/plot_legend.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/plotarea.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/renderer.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/service.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/variables.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/window.js"></script>
<script type="text/javascript" src="../../../src/parser/jquery/zoom.js"></script>

<script type="text/javascript" src="../../../src/graphics/canvas/canvas_mixin.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/axis.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/graph.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/icon.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/img.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/labeler.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/legend.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/multigraph.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/renderers/band_renderer.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/renderers/bar_renderer.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/renderers/fill_renderer.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/renderers/pointline_renderer.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/renderers/rangebar_renderer.js"></script>
<script type="text/javascript" src="../../../src/graphics/canvas/text.js"></script>
<script type="text/javascript" src="../../../src/events/jquery/mouse/mixin.js"></script>
<script type="text/javascript" src="../../../src/events/jquery/mouse/graph.js"></script>
<script type="text/javascript" src="../../../src/events/jquery/mouse/multigraph.js"></script>
<script type="text/javascript" src="../../../src/events/jquery/multigraph.js"></script>
<script type="text/javascript" src="../../../src/events/jquery/touch/mixin.js"></script>
<script type="text/javascript" src="../../../src/events/jquery/touch/graph.js"></script>
<script type="text/javascript" src="../../../src/events/jquery/touch/multigraph.js"></script>
<script type="text/javascript" src="../../../src/normalizer/normalizer_mixin.js"></script>
<script type="text/javascript" src="../../../src/normalizer/axis.js"></script>
<script type="text/javascript" src="../../../src/normalizer/data.js"></script>
<script type="text/javascript" src="../../../src/normalizer/graph.js"></script>
<script type="text/javascript" src="../../../src/normalizer/labeler.js"></script>
<script type="text/javascript" src="../../../src/normalizer/multigraph.js"></script>
<script type="text/javascript" src="../../../src/normalizer/plot.js"></script>
<!--END_ANT_LINES-->

  <style type="text/css">
    #mygraph {
      width:  800px;
      height: 500px;
      /*border: 1px solid #000;*/
      border: 0px;
    }
  </style>

  <script type="text/javascript">

$(document).ready(function () {

  var Multigraph = window.multigraph.core.Multigraph;

  var multigraphPromise = Multigraph.createCanvasGraph("mygraph", "../../mugl/tempgraph-datetime.xml");

  multigraphPromise.done(function (multigraph) {
    console.log('got a multigraph now');
  });

  multigraphPromise.done(function (multigraph) {
    console.log('   its size is ' + multigraph.width() + ' X ' + multigraph.height());
  });

/*
  var drawText = function (text,context,x,y) {

    context.beginPath();
    context.arc(x, y, 10, 0, 2*Math.PI, false);
    context.closePath();
    context.stroke();

    var metrics = context.measureText(text);
    //console.log(metrics);
    var width = metrics.width;
    console.log(width);

    context.transform(1,0,0,-1,0,2*y);
    context.fillText(text, x, y);
    context.transform(1,0,0,-1,0,2*y);

    context.beginPath();
    context.moveTo(x,y+50);
    context.lineTo(x,y);
    context.lineTo(x+width, y);
    context.lineTo(x+width, y+50);
    context.stroke();

  };

  multigraphPromise.done(function (multigraph) {
    console.log('drawing some text now');
    var context = multigraph.context();

//    context.font = "50px sans-serif";
    context.fillStyle = "#000000";
    drawText("This text is at [100,200]", context,100,200);
    drawText("This text is at [200,300]", context,200,300);
  });

*/

/*
  multigraphPromise.done(function (multigraph) {
    var g = multigraph.graphs().at(0);
    var i;
    for (i=0; i<g.axes().size(); ++i) {
      var a = g.axes().at(i);
      console.log('axis #' + i + ':');
      console.log('     type: ' + a.type());
      console.log('  dataMin: ' + a.dataMin());
      console.log('  dataMax: ' + a.dataMax());
      console.log('    ratio: ' + a.axisToDataRatio());
    }
  });
*/

});

  </script>

</head>

<body>
<center>
<div id="mygraph"/>
</center>
</body>
</html>
