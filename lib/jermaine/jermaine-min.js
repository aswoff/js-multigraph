if(!window.jermaine){window.jermaine={}}(function(b){var a={};var c=function(f){var g=[],l=this,m="invalid setter call for "+f,h,j,k,e,p,n=false,d,o=window.jermaine.AttrList;d=function(i){var q={};for(k=0;k<g.length;++k){if(g[k].validator.call(q,i)===false){if(q.message!==undefined){m=q.message}return false}}return true};j=function(){return(typeof(h)==="function")?h():h};if(f===undefined||typeof(f)!=="string"){throw new Error("Attr: constructor requires a name parameter which must be a string")}this.validatesWith=function(i){if(typeof(i)==="function"){g.push({validator:i});return this}else{throw new Error("Attr: validator must be a function")}};this.errorsWith=function(i){if(typeof(i)==="string"){m=i;return this}else{throw new Error("Attr: errorsWith method requires string parameter")}};this.defaultsTo=function(i){h=i;return this};this.errorMessage=function(){return m};this.isImmutable=function(){n=true;return this};this.isMutable=function(){n=false;return this};this.clone=function(){var q=(this instanceof o)?new o(f):new c(f),r;for(r=0;r<g.length;++r){q.validatesWith(g[r].validator)}q.errorsWith(m).defaultsTo(h);if(n){q.isImmutable()}return q};this.and=this;this.which=this;this.eachOfWhich=this;this.validator=function(){return d};this.addTo=function(r){var q,i;if(!r||typeof(r)!=="object"){throw new Error("Attr: addAttr method requires an object parameter")}i=j();if(i!==undefined&&d(i)){q=i}else{if(i!==undefined&&!d(i)){throw new Error("Attr: Default value of "+i+" does not pass validation for "+f)}}r[f]=function(s){if(s!==undefined){if(n&&q!==undefined){throw new Error("cannot set the immutable property "+f+" after it has been set")}else{if(!d(s)){throw new Error(m)}else{q=s}}return r}else{return q}}};p=function(i){l[i]=function(q){l.validatesWith(function(t){var s={},r;s.param=t;r=a[i].call(s,q);this.message=s.message;return r});return l}};for(e in a){if(a.hasOwnProperty(e)){p(e,a[e])}}};c.addValidator=function(e,d){if(e===undefined||typeof(e)!=="string"){throw new Error("addValidator requires a name to be specified as the first parameter")}if(d===undefined||typeof(d)!=="function"){throw new Error("addValidator requires a function as the second parameter")}if(a[e]===undefined){a[e]=d}else{throw new Error("Validator '"+e+"' already defined")}};c.addValidator("isGreaterThan",function(d){this.message=this.param+" should be greater than "+d;return this.param>d});c.addValidator("isLessThan",function(d){this.message=this.param+" should be less than "+d;return this.param<d});c.addValidator("isA",function(e){var d=["string","number","boolean","function","object"];if(typeof(e)==="string"&&d.indexOf(e)>-1){this.message=this.param+" should be a "+e;return typeof(this.param)===e}else{if(e==="integer"){if(this.param.toString!==undefined){this.message=this.param.toString()+" should be an integer"}else{this.message="parameter should be an integer"}return(typeof(this.param)==="number")&&(parseInt(this.param,10)===this.param)}else{if(typeof(e)==="string"){throw new Error("Attr: isA accepts a string which is one of "+d)}else{throw new Error("Attr: isA only accepts a string for a primitive types for the time being")}}}});c.addValidator("isOneOf",function(d){this.message=this.param+" should be one of the set: "+d;return d.indexOf(this.param)>-1});b.Attr=c}(window.jermaine));if(!window.jermaine){window.jermaine={}}(function(a){function b(c){var e=this;a.Attr.call(this,c);var d=function(g,f){return function(){return g[f].apply(e,arguments)}};this.validateWith=this.validatesWith;this.defaultsTo=function(){};this.isImmutable=function(){};this.isMutable=function(){};this.addTo=function(h){var i,f=[],g={};if(!h||typeof(h)!=="object"){throw new Error("AttrList: addTo method requires an object parameter")}else{g.pop=d(f,"pop");g.add=function(j){if((e.validator())(j)){f.push(j);return this}else{throw new Error(e.errorMessage())}};g.at=function(j){if(j<0||j>=this.size()){throw new Error("AttrList: Index out of bounds")}return f[j]};g.get=g.at;g.size=function(){return f.length};h[c]=function(){return g}}}}b.prototype=new window.jermaine.Attr(name);a.AttrList=b}(window.jermaine));if(!window.jermaine){window.jermaine={}}(function(a){var b=function(c,d){if(!c||typeof(c)!=="string"){throw new Error("Method: constructor requires a name parameter which must be a string")}else{if(!d||typeof(d)!=="function"){throw new Error("Method: second parameter must be a function")}}this.addTo=function(e){if(!e||typeof(e)!=="object"){throw new Error("Method: addTo method requires an object parameter")}e[c]=d}};a.Method=b}(window.jermaine));if(!window.multigraph){window.multigraph={}}if(!window.jermaine){window.jermaine={}}(function(a){function b(u){var h=this,q={},i={},p,f=false,d=[],n=[],r=[],c=a.Method,s=a.Attr,l=a.AttrList,g,v,k,j,t=function(){},o=function(){},e=function(){if(f){k()}return o.apply(this,arguments)};if(arguments.length>1){u=arguments[arguments.length-1]}if(u&&typeof(u)==="function"){e=new b();u.call(e);return e}else{if(u){throw new Error("Model: specification parameter must be a function")}}var m=function(y,x){var A=y==="Attr"?s:l,w=y==="Attr"?"hasA":"hasMany",z;f=true;if(typeof(x)==="string"){z=new A(x);i[x]=z;return z}else{throw new Error("Model: "+w+" parameter must be a string")}};g=function(y,x){var w;if(typeof(x)!=="string"){throw new Error("Model: expected string argument to "+y+" method, but recieved "+x)}w=y==="attribute"?i[x]:q[x];if(w===undefined){throw new Error("Model: "+y+" "+x+" does not exist!")}return w};v=function(y){var x,z=[],w=y==="attributes"?i:q;for(x in w){if(w.hasOwnProperty(x)){z.push(x)}}return z};k=function(w){var z=this,x,y;e.validate();o=function(){var B,A=function(F,E){var D=E==="attributes"?i:q,C;for(C in D){if(D.hasOwnProperty(C)){if(D===i&&j){D[C].isImmutable()}D[C].addTo(F)}}};A(this,"attributes");A(this,"methods");this.toString=p;if(arguments.length>0){if(arguments.length<d.length){y="Constructor requires ";for(B=0;B<d.length;++B){y+=d[B];y+=B===d.length-1?"":", "}y+=" to be specified";throw new Error(y)}else{for(B=0;B<arguments.length;++B){if(B<d.length){this[d[B]](arguments[B])}else{this[n[B-d.length]](arguments[B])}}}}t.call(this)};return o};e.hasA=function(w){return m("Attr",w)};e.hasAn=e.hasA;e.hasMany=function(w){return m("AttrList",w)};e.isA=function(y){var x,w,A,z;f=true;z=function(C){var B,D=new b();for(B in D){if(D.hasOwnProperty(B)&&typeof(C[B])!==typeof(D[B])){return false}}return true};if(typeof(y)!=="function"||!z(y)){throw new Error("Model: parameter sent to isA function must be a Model")}if(r.length===0){r.push(y)}else{throw new Error("Model: Model only supports single inheritance at this time")}w=r[0].attributes();for(x=0;x<w.length;++x){if(i[w[x]]===undefined){i[w[x]]=r[0].attribute(w[x]).clone();i[w[x]].isMutable()}}A=r[0].methods();for(x=0;x<A.length;++x){if(q[A[x]]===undefined){q[A[x]]=r[0].method(A[x])}}for(x=0;x<r.length;x++){e.prototype=new r[x]()}};e.isAn=e.isA;e.parent=function(){return r[0].apply(this,arguments)};e.attribute=function(w){return g("attribute",w)};e.attributes=function(){return v("attributes")};e.method=function(w){return g("method",w)};e.methods=function(){return v("methods")};e.isBuiltWith=function(){var w=false,x;f=true;d=[];n=[];for(x=0;x<arguments.length;++x){if(typeof(arguments[x])==="string"&&arguments[x].charAt(0)!=="%"){if(w){throw new Error("Model: isBuiltWith requires parameters preceded with a % to be the final parameters before the optional function")}else{d.push(arguments[x])}}else{if(typeof(arguments[x])==="string"&&arguments[x].charAt(0)==="%"){w=true;n.push(arguments[x].slice(1))}else{if(typeof(arguments[x])==="function"&&x===arguments.length-1){t=arguments[x]}else{throw new Error("Model: isBuiltWith parameters must be strings except for a function as the optional final parameter")}}}}};e.isImmutable=function(){j=true};e.looksLike=function(w){f=true;p=w};e.respondsTo=function(x,y){var w=new c(x,y);f=true;q[x]=w};e.validate=function(){var y,x=this.attributes(),w=this.methods();for(y=0;y<d.length;++y){try{this.attribute(d[y])}catch(z){throw new Error(d[y]+", specified in the isBuiltWith method, is not an attribute")}}for(y=0;y<n.length;++y){try{this.attribute(n[y])}catch(z){throw new Error(n[y]+", specified in the isBuiltWith method, is not an attribute")}}for(y=0;y<x.length;y++){if(w.indexOf(x[y])>-1){throw new Error("Model: invalid model specification to "+x[y]+" being both an attribute and method")}}if(j){for(y=0;y<x.length;y++){if(d.indexOf(x[y])<0){throw new Error("immutable objects must have all attributes required in a call to isBuiltWith")}}}f=false};return e}a.Model=b}(window.jermaine));